<!DOCTYPE html>
<html lang="fa" dir="rtl">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Ù‡Ù…Ú©Ø§Ø±ÛŒ Ø§ÙØªØ®Ø§Ø±ÛŒ | Ù†Ø°Ø± ØªØ®ØµØµ</title>
        <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <script>
            function initTailwind() {
                tailwind.config = {
                    theme: {
                        extend: {
                            fontFamily: {
                                sans: ['Vazirmatn', 'sans-serif'],
                            },
                            colors: {
                                'brand-dark': '#1c2b36',
                                'brand-cyan': '#4bc3d0',
                                'brand-cyan-dark': '#3aaebb',
                                'brand-bg': '#f3f4f6',
                                primary: '#2ca4a4',
                                secondary: '#1f2937',
                                darkblue: '#132c45',
                                lightbg: '#f9fafb',
                            },
                            boxShadow: {
                                'card': '0 2px 15px rgba(0,0,0,0.05)',
                            }
                        }
                    }
                }
            }
        </script>
        <script src="https://cdn.tailwindcss.com" onload="initTailwind()"></script>
        <style>
            body { font-family: 'Vazirmatn', sans-serif; }
            .skill-check:checked + div {
                background-color: #f0fdf4;
                border-color: #22c55e;
                color: #15803d;
                box-shadow: 0 4px 6px -1px rgba(34, 197, 94, 0.1);
            }
        </style>
    </head>

    <body class="bg-gray-50 text-gray-800">

        <script>
            const API_BASE = 'https://charity-backend.alibagerpour2.workers.dev'; 
        </script>

        <div id="toast" class="fixed bottom-10 left-1/2 transform -translate-x-1/2 translate-y-20 opacity-0 bg-darkblue text-white px-6 py-2 rounded-full shadow-lg transition-all duration-300 z-50 text-sm font-bold flex items-center gap-2">
            <span>Ú©Ù¾ÛŒ Ø´Ø¯!</span>
            <i class="fas fa-check-circle text-green-400"></i>
        </div>
        <div id="header-placeholder"></div>

        <main class="max-w-5xl mx-auto px-4 py-12">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-black text-gray-800 mb-4">Ù…Ù‡Ø±Ø¨Ø§Ù†ÛŒ ÙÙ‚Ø· Ø¨Ø§ Ù¾ÙˆÙ„ Ù†ÛŒØ³Øª!</h2>
                <p class="text-gray-500 text-lg max-w-2xl mx-auto">Ø²Ù…Ø§Ù†ØŒ ØªØ®ØµØµ Ùˆ Ø§Ù†Ø±Ú˜ÛŒ Ø´Ù…Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø²Ù†Ø¯Ú¯ÛŒ ÛŒÚ© Ù†ÙØ± Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡Ø¯.</p>
            </div>
            <form onsubmit="submitVolunteer(event)" class="bg-white rounded-3xl p-6 md:p-10 shadow-xl border border-gray-100">
                <h3 class="font-bold text-lg mb-6 flex items-center gap-2">
                    <span class="bg-teal-100 text-teal-600 w-8 h-8 rounded-full flex items-center justify-center text-sm">1</span>
                    ØªÙˆØ§Ù†Ø§ÛŒÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ù†:
                </h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-10">
                    <label class="cursor-pointer group">
                        <input type="checkbox" name="skills" value="Ø±Ø§Ù†Ù†Ø¯Ù‡" class="hidden skill-check">
                        <div class="border-2 border-gray-100 rounded-2xl p-4 text-center transition duration-200 group-hover:border-gray-300 h-full flex flex-col justify-center">
                            <div class="text-3xl mb-2">ğŸš—</div>
                            <span class="font-bold text-sm">ÙˆØ³ÛŒÙ„Ù‡ Ù†Ù‚Ù„ÛŒÙ‡ Ø¯Ø§Ø±Ù…</span>
                            <span class="text-[10px] text-gray-400 mt-1">Ø¨Ø±Ø§ÛŒ Ù¾Ø®Ø´ ØºØ°Ø§/Ø¨Ø³ØªÙ‡</span>
                        </div>
                    </label>
                    <label class="cursor-pointer group">
                        <input type="checkbox" name="skills" value="Ù¾Ø²Ø´Ú©" class="hidden skill-check">
                        <div class="border-2 border-gray-100 rounded-2xl p-4 text-center transition duration-200 group-hover:border-gray-300 h-full flex flex-col justify-center">
                            <div class="text-3xl mb-2">ğŸ©º</div>
                            <span class="font-bold text-sm">Ù¾Ø²Ø´Ú© / Ù¾Ø±Ø³ØªØ§Ø±</span>
                            <span class="text-[10px] text-gray-400 mt-1">ÙˆÛŒØ²ÛŒØª Ø±Ø§ÛŒÚ¯Ø§Ù†</span>
                        </div>
                    </label>
                    <label class="cursor-pointer group">
                        <input type="checkbox" name="skills" value="ØªØ¯Ø±ÛŒØ³" class="hidden skill-check">
                        <div class="border-2 border-gray-100 rounded-2xl p-4 text-center transition duration-200 group-hover:border-gray-300 h-full flex flex-col justify-center">
                            <div class="text-3xl mb-2">ğŸ“š</div>
                            <span class="font-bold text-sm">ØªØ¯Ø±ÛŒØ³ / Ø¢Ù…ÙˆØ²Ø´</span>
                            <span class="text-[10px] text-gray-400 mt-1">Ø¨Ø±Ø§ÛŒ Ú©ÙˆØ¯Ú©Ø§Ù† Ø¨Ø§Ø²Ù…Ø§Ù†Ø¯Ù‡ Ø§Ø² ØªØ­ØµÛŒÙ„</span>
                        </div>
                    </label>
                    <label class="cursor-pointer group">
                        <input type="checkbox" name="skills" value="Ø¹Ú©Ø§Ø³ÛŒ" class="hidden skill-check">
                        <div class="border-2 border-gray-100 rounded-2xl p-4 text-center transition duration-200 group-hover:border-gray-300 h-full flex flex-col justify-center">
                            <div class="text-3xl mb-2">ğŸ“·</div>
                            <span class="font-bold text-sm">Ø¹Ú©Ø§Ø³ÛŒ / Ú¯Ø±Ø§ÙÛŒÚ©</span>
                            <span class="text-[10px] text-gray-400 mt-1">ØªÙˆÙ„ÛŒØ¯ Ù…Ø­ØªÙˆØ§ Ø¨Ø±Ø§ÛŒ Ø®ÛŒØ±ÛŒÙ‡</span>
                        </div>
                    </label>
                    <label class="cursor-pointer group">
                        <input type="checkbox" name="skills" value="Ø¢Ø´Ù¾Ø²ÛŒ" class="hidden skill-check">
                        <div class="border-2 border-gray-100 rounded-2xl p-4 text-center transition duration-200 group-hover:border-gray-300 h-full flex flex-col justify-center">
                            <div class="text-3xl mb-2">ğŸ²</div>
                            <span class="font-bold text-sm">Ø¢Ø´Ù¾Ø²ÛŒ</span>
                            <span class="text-[10px] text-gray-400 mt-1">ØªÙ‡ÛŒÙ‡ ØºØ°Ø§ÛŒ Ú¯Ø±Ù…</span>
                        </div>
                    </label>
                    <label class="cursor-pointer group">
                        <input type="checkbox" name="skills" value="Ø³Ø§ÛŒØ± Ù…Ù‡Ø§Ø±Øªâ€ŒÙ‡Ø§" class="hidden skill-check">
                        <div class="border-2 border-gray-100 rounded-2xl p-4 text-center transition duration-200 group-hover:border-gray-300 h-full flex flex-col justify-center">
                            <div class="text-3xl mb-2">âœ¨</div>
                            <span class="font-bold text-sm">Ø³Ø§ÛŒØ± Ù…Ù‡Ø§Ø±Øªâ€ŒÙ‡Ø§</span>
                            <span class="text-[10px] text-gray-400 mt-1">Ù‡Ø± Ú©Ù…Ú©ÛŒ Ø§Ø±Ø²Ø´Ù…Ù†Ø¯ Ø§Ø³Øª</span>
                        </div>
                    </label>
                </div>
                <h3 class="font-bold text-lg mb-6 flex items-center gap-2">
                    <span class="bg-teal-100 text-teal-600 w-8 h-8 rounded-full flex items-center justify-center text-sm">2</span>
                    Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³:
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <input type="text" id="v-name" placeholder="Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ" class="w-full bg-gray-50 border-none p-4 rounded-xl focus:ring-2 focus:ring-teal-200 transition" required>
                    <input type="text" id="v-phone" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„" class="w-full bg-gray-50 border-none p-4 rounded-xl focus:ring-2 focus:ring-teal-200 transition text-left" dir="ltr" required>
                    <input type="text" id="v-avail" placeholder="Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¢Ø²Ø§Ø¯ (Ù…Ø«Ù„Ø§: Ù¾Ù†Ø¬Ø´Ù†Ø¨Ù‡â€ŒÙ‡Ø§)" class="w-full bg-gray-50 border-none p-4 rounded-xl focus:ring-2 focus:ring-teal-200 transition md:col-span-2">
                </div>
                <button type="submit" id="btn-sub" class="w-full bg-teal-600 text-white font-bold py-4 rounded-2xl shadow-lg hover:bg-teal-700 transition">Ø«Ø¨Øª Ø§Ø¹Ù„Ø§Ù… Ø¢Ù…Ø§Ø¯Ú¯ÛŒ</button>
            </form>
        </main>

        <div id="footer-placeholder"></div>
        <script src="header.js"></script>
        <script src="footer.js"></script>

        <script>
            async function submitVolunteer(e) {
                e.preventDefault();
                const btn = document.getElementById('btn-sub');
                const name = document.getElementById('v-name').value;
                const phone = document.getElementById('v-phone').value;
                const availability = document.getElementById('v-avail').value;
                const skills = [];
                document.querySelectorAll('input[name="skills"]:checked').forEach(cb => skills.push(cb.value));
                if(skills.length === 0) return alert('Ù„Ø·ÙØ§Ù‹ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù…Ù‡Ø§Ø±Øª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                btn.disabled = true;
                btn.innerText = 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„...';
                try {
                    const res = await fetch(`${API_BASE}/api/volunteer`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ name, phone, skills, availability })
                    });
                    if (res.ok) {
                        alert('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯. Ù‡Ù…Ú©Ø§Ø±Ø§Ù† Ù…Ø§ Ø¨Ø§ Ø´Ù…Ø§ ØªÙ…Ø§Ø³ Ø®ÙˆØ§Ù‡Ù†Ø¯ Ú¯Ø±ÙØª.');
                        window.location.href = '../index.html';
                    } else {
                        alert('Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª');
                    }
                } catch (error) {
                    alert('Ø®Ø·Ø§ÛŒ Ø´Ø¨Ú©Ù‡');
                } finally {
                    btn.disabled = false;
                    btn.innerText = 'Ø«Ø¨Øª Ø§Ø¹Ù„Ø§Ù… Ø¢Ù…Ø§Ø¯Ú¯ÛŒ';
                }
            }
            
        </script>
    </body>
</html>